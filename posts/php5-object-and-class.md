---
date: 2013-04-23
layout: post
title: PHP5对象与类
categories:
- PHP
tags:
- PHP
---

**对象的“形”**

类是我们对一组对象的描述

* 类定义了一系列的属性和方法，并提供了实际的操作方法，这些方法可以用来对属性进行加工
* 对象含有类属性的具体值，这就是类的实例化。正是由于属性的不同，才能区分不同的对象。
* 类与对象的关系似一种服务与被服务、加工与被加工的关系，具体而言，就如同原材料与流水线的关系。只需要再对象中调用类中存在的方法，就可以对类的属性进行加工，并展示其功能

**对象的“本”**

在PHP5中，对象在底层的实现是采取“属性数组 + 方法数组”来实现的。

用map数组展示一下对象的组成

    object = array(
        "属性数组"
        “类指针”=>array(
            "类属性"
            “静态属性”
            “类常量”
            “标准方法”
            “魔术方法”
            ”自定义方法表“
        )
    )


对象在PHP中是使用一种zend_object_value 结构体存储的，他的定义如下

    typedef struct _zend_object {
        zend_class_entry * ce; //类入口
        HashTable *properties; //属性组成的HashTable
        HashTable *guards; //阻止递归调用
    }

**对象与类**

PHP语言中对象与类的概念与两者之间的关系

* 类是定义一系列属性和操作的模板，而对象则把属性进行具体化，然后交由类来处理
* 对象就是数据，对象本身不包含方法。但是对象有一个“指针” 指向一个类，这个类里可以有方法。
* 方法描述不同属性所导致的不同表现
* 类和对象是不可分割的，有对象必有一个类和其对应，否则这个对象也就成了没有娘的孩子（有一个特殊情况，就是由标量进行强制类型转换的object，没有一个类与它对应。此事，PHP中一个称为“孤儿”的stdClass类就会收留这个对象）


--摘自[《PHP核心技术与最佳实践》](http://book.douban.com/subject/20370984/)
